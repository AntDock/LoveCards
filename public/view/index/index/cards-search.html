{include file="index/public/header"}

<!-- 页体 -->
<div id="jsParameter" jsTabClass="3" class="mdui-container mdui-p-t-2">

    <div class="mdui-row mdui-p-t-1">
        <div class="mdui-col-md-6 mdui-col-offset-md-3">
            <div class="mdui-row">
                <div class="mdui-col-xs-9 mdui-col-sm-10">
                    <div class="mdui-textfield">
                        <input id="SearchValue" class="mdui-textfield-input" type="search" placeholder="ID、名字、内容">
                    </div>
                </div>
                <div class="mdui-col-xs-3 mdui-col-sm-2 mdui-text-center mdui-float-right">
                    <button id="requestSearch" type="button"
                        class="mdui-m-y-2 mdui-btn mdui-btn-raised mdui-color-theme-accent">搜索</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 主体组件 -->
    <div id="jsMainComp" class="mdui-m-t-2">

        <div class="mdui-row-xs-1 mdui-row-sm-2 mdui-row-md-3 mdui-row-lg-3">
            <!-- 卡片循环 -->
            {volist name='cardsListData' id='data'}
            <div class="mdui-col mdui-m-b-2">

                <div class="mdui-card">
                    <!-- 卡片头部，包含头像、标题、副标题 -->
                    {if $data.model == 0}
                    <div class="mdui-p-t-2 mdui-p-x-2">
                        {if $data.woName}
                        <div class="css-caard-header-title mdui-text-color-theme">
                            {$data.woName}的表白卡
                            <i class="js-Shareurl-cardId" value="{$data.id}">&#xe63d;</i>
                            <i class="mdui-icon material-icons mdui-float-right">face</i>
                        </div>
                        <div class="css-caard-header-subtite">{$data.woName} 表白 {$data.taName}</div>
                        {else}
                        <div class="css-caard-header-title mdui-text-color-theme">
                            匿名的表白卡
                            <i class="js-Shareurl-cardId" value="{$data.id}">&#xe63d;</i>
                        </div>
                        <div class="css-caard-header-subtite">表白 {$data.taName}</div>
                        {/if}
                    </div>
                    {else}
                    <div class="mdui-p-t-2 mdui-p-x-2">
                        {if $data.woName}
                        <div class="css-caard-header-title mdui-text-color-theme">
                            {$data.woName}的交流卡
                            <i class="js-Shareurl-cardId" value="{$data.id}">&#xe63d;</i>
                            <i class="mdui-icon material-icons mdui-float-right">face</i>
                        </div>
                        <div class="css-caard-header-subtite">{$data.woName} {if $data.taName}对 {$data.taName}{/if} 说</div>
                        {else}
                        <div class="css-caard-header-title mdui-text-color-theme">
                            匿名的交流卡
                            <i class="js-Shareurl-cardId" value="{$data.id}">&#xe63d;</i>
                        </div>
                        <div class="css-caard-header-subtite">{if $data.taName}对 {$data.taName}{/if} 说</div>
                        {/if}
                    </div>
                    {/if}
                    {if $data.img}
                    <div class="mdui-card-media mdui-p-t-2">
                        <div class="css-cards-img mdui-m-x-1">
                            <img src="{$data.img}" class="js-jumpurl-cardId" value="{$data.id}" />
                        </div>
                    </div>
                    {/if}

                    <!-- 卡片的内容 -->
                    <div class="mdui-p-a-2 mdui-typo">
                        {if $data.tag}
                        <div class="css-cards-primary-subtitle" value={$data.tag|raw}>
                            <!-- Tag标签 -->
                        </div>
                        {/if}
                        <div class="js-jumpurl-cardId mdui-p-t-1 css-cards-primary-content" value="{$data.id}">
                            {$data.content}
                        </div>
                    </div>


                    <!-- 卡片的按钮 -->
                    <div class="mdui-card-actions">
                        <button class="js-jumpurl-cardId css-card-actions-btn mdui-btn mdui-float-left"
                            value="{$data.id}">
                            <i class="mdui-icon material-icons">insert_comment</i>评论{$data.comments}
                        </button>

                        {if $data.ipGood == false}
                        <button value="{$data.id}"
                            class="js-Btn-Update-CardsGood css-card-actions-good-0 mdui-btn mdui-float-right">
                            <i class="mdui-icon material-icons">favorite</i>点赞{$data.good}
                        </button>
                        {else}
                        <button class="css-card-actions-good-1 mdui-btn mdui-float-right">
                            <i class="mdui-icon material-icons">favorite</i>点赞{$data.good}
                        </button>
                        {/if}
                    </div>
                </div>
            </div>
            {/volist}
            <!-- 弹窗 -->
            <div class="mdui-dialog" id="dialog-share" value="">
                <div class="mdui-dialog-title">
                    分享
                    <i class="mdui-icon material-icons mdui-float-right" mdui-dialog-cancel>close</i>
                </div>
                <div class="mdui-p-x-1 mdui-p-b-2">
                    <ul class="mdui-list">
                        <!-- <li class="mdui-list-item mdui-ripple js-jumpurl-qq-cardId">
                            <i class="mdui-list-item-icon iconfont">&#xe8d4;</i>
                            <div class="mdui-list-item-content">分享至QQ</div>
                        </li>
                        <li class="mdui-list-item mdui-ripple js-jumpurl-wx-cardId">
                            <i class="mdui-list-item-icon iconfont">&#xe8d5;</i>
                            <div class="mdui-list-item-content">分享至微信</div>
                        </li> -->
                        <li class="mdui-list-item mdui-ripple js-jumpurl-wb-cardId">
                            <i class="mdui-list-item-icon iconfont">&#xe8da;</i>
                            <div class="mdui-list-item-content">分享至微博</div>
                        </li>
                        <li class="mdui-list-item mdui-ripple js-copyurl-cardId">
                            <i class="mdui-list-item-icon iconfont">&#xef86;</i>
                            <div class="mdui-list-item-content" mdui-dialog-cancel>复制分享内容</div>
                        </li>
                        <li class="mdui-p-x-2" style="display:none;">
                            <div class="mdui-divider"></div>
                            <div class="mdui-p-t-1">
                                <div class="mdui-typo-caption-opacity">复制分享内容：</div>
                                <textarea class="mdui-textfield-input" rows="4" readonly>分享内容加载失败，请刷新后重试~</textarea>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

        </div>
    </div>

</div>

{include file="index/public/footer"}

<script>
    $(function () {
        //初始化-分页组件
        pager();
        //初始化-Tag组件
        ViewCardsTag({$cardsTagData|raw});
        //初始化-View-搜索
        if (getUrlParam('search')) {
            $('#SearchValue').val(getUrlParam('value'));
            if (!$('.mdui-card').length) {
                $('#jsMainComp').children().html('<div class="mdui-typo-title-opacity mdui-text-center" style="padding-top: 184px">没有唉~</div>')
            }
        }
    });

    //表单-按钮-搜索
    $('#requestSearch').click(function () {
        jumpUrl('/index/Cards/search?search=true&model=0&value=' + $('#SearchValue').val(), 0);
    });
</script>

</body>

</html>